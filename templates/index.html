<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ocean - AI Solution Assessment</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/OceanAssesment/static/style.css" rel="stylesheet">

    <style>
        .form-control:focus {
            border-color: #7f8388;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        }

        .form-label {
            font-weight: 500;
        }

        #contactForm .btn-primary {
            background-color:black;
            border-color: #7f8388;
            transition: background-color 0.3s ease;
        }

        #contactForm .btn-primary:hover {
            background-color:black;
            border-color: #7f8388;
        }

        #contactForm textarea.form-control {
            resize: vertical; /* Allows vertical resizing */
        }

        .company-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            background: #fff;
        }

        .company-card h5 {
            margin-bottom: 10px;
        }

        .company-card ul {
            list-style-type: none;
            padding-left: 0;
        }

        .company-card li {
            margin-bottom: 5px;
        }

        .dark-mode .company-card {
            background: #070707;
            border-color: #f7f3f3;
            color: #fff;
                }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <p>Ocean</p>
            </a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="#features">Features</a>
                <a class="nav-link" href="#pricing">Pricing</a>
                <a class="nav-link" href="gate.html">GATE</a>
                <div class="dropdown ms-3">
                    <button class="btn btn-login dropdown-toggle" type="button" id="loginDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                      Log In
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="loginDropdown">
                      <li><a class="dropdown-item" href="login_user.html" data-role="user">User</a></li>
                      <li><a class="dropdown-item" href="login_Partner.html" data-role="partner">Channel Partner</a></li>
                      <li><a class="dropdown-item" href="login.html" data-role="admin">Admin</a></li>
                    </ul>
                  </div>
                  <button onclick="toggleTheme()" 
                  class="btn btn-sm btn-outline-dark ms-3" 
                  id="themeToggle" 
                  data-theme="dark">
            🌙
          </button>
            </div>
        </div>
    </nav>

    <div class="main-content">
        <h1>AI Solution Assessment Platform</h1>
        <p class="lead">Navigate the overwhelming AI marketplace with confidence. Get instant, objective assessments of AI solutions and vendors.</p>
        <div class="input-group">
            <input type="text" id="searchInput" class="form-control" placeholder="Enter URL, company name, or product category">
            <button class="btn-analyze" onclick="window.location='DemoReport.html'">Analyze</button>
        </div>
    <div id="features" class="container my-5">
        <h2 class="section-title">Comprehensive Assessment Criteria</h2>
        <div class="row justify-content-center tile-container">
            <div class="col-md-4 col-sm-6 mb-4">
                <div class="card-panel">
                    <div class="heading-with-icon">
                        <h5>Performance Metrics</h5>
                      </div>
                    <p>Evaluate accuracy, speed, reliability, and resource requirements of AI solutions.</p>
                </div>
            </div>
            <div class="col-md-4 col-sm-6 mb-4">
                <div class="card-panel">
                    <h5>Security Capabilities</h5>
                    <p>Assess data encryption, access controls, and vulnerability management.</p>
                </div>
            </div>
            <div class="col-md-4 col-sm-6 mb-4">
                <div class="card-panel">
                    <h5>Integration Capabilities</h5>
                    <p>Understand how well the solution integrates with existing systems.</p>
                </div>
            </div>
            <div class="col-md-4 col-sm-6 mb-4">
                <div class="card-panel">
                    <h5>Financial Stability</h5>
                    <p>Review business longevity, funding status, and market position.</p>
                </div>
            </div>
            <div class="col-md-4 col-sm-6 mb-4">
                <div class="card-panel">
                    <h5>Total Cost of Ownership</h5>
                    <p>Compare initial costs, ongoing fees, implementation, and maintenance expenses.</p>
                </div>
            </div>
            <div class="col-md-4 col-sm-6 mb-4">
                <div class="card-panel">
                    <h5>Technical Expertise</h5>
                    <p>Evaluate the vendor's expertise and track record in your specific industry.</p>
                </div>
            </div>
        </div>
    </div>

    <div id="how-it-works" class="container my-5">
        <h2 class="section-title">How It Works</h2>
        <div class="row">
            <div class="col-md-3">
                <div class="card-panel">
                    <h5>1</h5>
                    <p>Enter URL or Company Name<br>Simply provide the website URL, company name, or product category you want to assess.</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card-panel">
                    <h5>2</h5>
                    <p>Automated Analysis<br>Our AI engine thoroughly analyzes public information about the solution and vendor.</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card-panel">
                    <h5>3</h5>
                    <p>Review Assessment Report<br>Receive a comprehensive evaluation with ratings across key assessment criteria.</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card-panel">
                    <h5>4</h5>
                    <p>Explore Details<br>Dive deeper into any rating to understand the reasoning and evidence behind it.</p>
                </div>
            </div>
        </div>
    </div>

    <div id="pricing" class="pricing-section">
        <h2 class="section-title">Choose Your Plan</h2>
        <p class="lead">Start with our free assessment or upgrade to Pro for comprehensive insights and advanced features.</p>
        <div class="pricing-container">
            <div class="pricing-card">
                <h4>OCEAN-A(Freemium)</h4>
                <p class="price">$0</p>
                <ul>
                    <li>✓ Basic assessment report</li>
                    <li>✓ Public information analysis</li>
                    <li>✓ Key metrics evaluation</li>
                    <li class="x">X Save assessment history</li>
                </ul>
                <button class="btn btn-outline-dark" onclick="window.location='login_user.html#'" >Try Now</button>
            </div>
            <div class="pricing-card">
                <h5>OCEAN-B(Pro)</h5>
                <p class="price">Contact Us</p>
                <ul>
                    <li>✓ Advanced detailed assessment</li>
                    <li>✓ Direct vendor engagement</li>
                    <li>✓ Customized evaluation criteria</li>
                    <li>✓ Unlimited saved assessments</li>
                </ul>
                <button class="btn btn-dark" onclick="openContactUs()">Contact Us</button>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <a href="#">About Us</a>
            <a href="#" onclick="openContactUs()">Contact</a>
            <a href="#">Privacy Policy</a>
            <a href="#">Terms of Service</a>
            <p class="mt-2">© 2025 Ocean. All rights reserved.</p>
        </div>
    </footer>

    <div id="chatbot-icon" class="chatbot-icon position-fixed bottom-0 end-0 m-4" onclick="toggleChat()">
        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor" class="bi bi-chat-fill" viewBox="0 0 16 16">
            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16h6a1 1 0 1 0 0-2H8z"/>
        </svg>
    </div>

    <div id="chat-interface" class="position-fixed bottom-0 end-0 m-4" style="display: none;">
        <div class="card shadow-lg" style="width: 350px; border-radius: 20px; overflow: hidden;">
            <div class="card-header bg-gradient text-white d-flex justify-content-between align-items-center">
                <h6 class="mb-0">Chat with Ocean</h6>
                <button class="btn btn-close btn-close-white" onclick="toggleChat()"></button>
            </div>
            <div class="card-body p-3" style="max-height: 400px; overflow-y: auto; background: #fff;" id="chat-messages">
                <div class="welcome-message text-center text-muted mb-3" style="font-size: 0.9rem; color: #4a4a4a;">
                    Hi! Ask me anything about the assessed data.
                </div>
            </div>
            <div class="card-footer p-2 bg-white">
                <div class="input-group">
                    <input type="text" id="chat-input" class="form-control form-control-sm" placeholder="Type your query..." style="border-radius: 20px 0 0 20px;">
                    <button class="btn btn-dark btn-sm" onclick="sendChatMessage()" style="border-radius: 0 20px 20px 0;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-send" viewBox="0 0 16 16">
                            <path d="M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576 6.636 10.07Zm6.787-8.201L1.591 6.602l4.339 2.76 7.494-7.493Z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="detailedReportModal" tabindex="-1" aria-labelledby="detailedReportModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="detailedReportModalLabel">Detailed Report</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="detailedReportContent">
                    <p>Loading report...</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="contactUsModal" tabindex="-1" aria-labelledby="contactUsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="contactUsModalLabel">Contact Us</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>For more information about our Pro plan, please fill out the form below:</p>
                    <form id="contactForm">
                        <div class="mb-3">
                            <label for="name" class="form-label">Name</label>
                            <input type="text" class="form-control" id="name" required>
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label">Email address</label>
                            <input type="email" class="form-control" id="email" required>
                        </div>
                        <div class="mb-3">
                            <label for="message" class="form-label">Message</label>
                            <textarea class="form-control" id="message" rows="3" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Send Message</button>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.js"></script>
    <script>
        let currentSegment = null;

        function toggleTheme() {
  document.body.classList.toggle('dark-mode');
  
  // Update emoji based on current theme
  const themeToggle = document.getElementById('themeToggle');
  themeToggle.innerHTML = document.body.classList.contains('dark-mode') ? '☀️' : '🌙';
  
  // Save theme preference
  localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
}

// Load theme preference on page load
window.onload = () => {
  const savedTheme = localStorage.getItem('theme');
  const themeToggle = document.getElementById('themeToggle');
  
  if (savedTheme === 'dark') {
    document.body.classList.add('dark-mode');
    themeToggle.innerHTML = '☀️';
  } else {
    themeToggle.innerHTML = '🌙';
  }
  
  document.getElementById('chatbot-icon').style.display = 'none';
};

        function submitSearch() {
            const input = document.getElementById('searchInput').value.trim();
            if (!input) {
                alert('Please enter a URL, company name, or product category.');
                return;
            }

            document.getElementById('result').innerHTML = '<p>Loading...</p>';

            fetch('/search', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ input: input })
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Search failed');
                }
                return response.text(); // Expect HTML from results.html
            })
            .then(html => {
                // Render results in #result
                document.getElementById('result').innerHTML = html;
                // Extract segment from rendered content (assuming results.html includes data-segment)
                const segmentElement = document.querySelector('[data-segment]');
                currentSegment = segmentElement ? segmentElement.dataset.segment : input.toLowerCase();
                // Show chatbot icon
                document.getElementById('chatbot-icon').style.display = 'block';
            })
            .catch(error => {
                console.error('Search error:', error);
                document.getElementById('result').innerHTML = '<p class="text-danger">Error loading results. Please try again.</p>';
            });
        }

        function viewDetailedReport(companyName, segment) {
            fetch('/detailed_report', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ company_name: companyName, segment: segment })
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Report fetch failed');
                }
                return response.text(); // Expect HTML from report.html
            })
            .then(html => {
                document.getElementById('detailedReportContent').innerHTML = html;
                const modal = new bootstrap.Modal(document.getElementById('detailedReportModal'));
                modal.show();
            })
            .catch(error => {
                console.error('Report error:', error);
                document.getElementById('detailedReportContent').innerHTML = '<p class="text-danger">Error loading report. Please try again.</p>';
                const modal = new bootstrap.Modal(document.getElementById('detailedReportModal'));
                modal.show();
            });
        }

        function toggleChat() {
            const chatInterface = document.getElementById('chat-interface');
            chatInterface.style.display = chatInterface.style.display === 'none' ? 'block' : 'none';
        }

        function sendChatMessage() {
            const query = document.getElementById('chat-input').value.trim();
            if (!query) {
                return;
            }
            if (!currentSegment) {
                alert('Please perform a search first to set the context.');
                return;
            }

            // Display user message
            const chatMessages = document.getElementById('chat-messages');
            const userMessage = document.createElement('div');
            userMessage.className = 'text-end mb-2';
            userMessage.innerHTML = `<span class="badge bg-primary">${query}</span>`;
            chatMessages.appendChild(userMessage);
            document.getElementById('chat-input').value = '';

            // Fetch response
            fetch('/chat', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ query: query, segment: currentSegment })
            })
            .then(response => response.json())
            .then(data => {
                const botMessage = document.createElement('div');
                botMessage.className = 'text-start mb-2';
                botMessage.innerHTML = `<span class="badge bg-secondary">${data.answer || 'No answer available.'}</span>`;
                chatMessages.appendChild(botMessage);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            })
            .catch(error => {
                console.error('Chat error:', error);
                const botMessage = document.createElement('div');
                botMessage.className = 'text-start mb-2';
                botMessage.innerHTML = `<span class="badge bg-danger">Error: Unable to process query.</span>`;
                chatMessages.appendChild(botMessage);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            });
        }

        function openContactUs() {
            const contactUsModal = new bootstrap.Modal(document.getElementById('contactUsModal'));
            contactUsModal.show();
        }

        document.getElementById('contactForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const message = document.getElementById('message').value;

            fetch('/contact', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name: name, email: email, message: message })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('Message sent successfully!');
                } else {
                    alert('Failed to send message.');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('An error occurred.');
            });

            const contactUsModal = bootstrap.Modal.getInstance(document.getElementById('contactUsModal'));
            contactUsModal.hide();
        });
    </script>
</body>
</html>